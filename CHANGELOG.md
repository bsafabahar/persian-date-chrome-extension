# خلاصه تغییرات برای رفع مشکل فرمت‌های تاریخ

## مشکل گزارش شده
کاربر گزارش کرد که این فرمت‌های تاریخ به اشتباه تبدیل نمی‌شوند:
```
Created:	21/Apr/25 9:50 AM
Updated:	2 days ago 1:46 PM
Resolved:	21/Apr/25 9:50 AM
Start date (WBSGantt):	None
Target end:	None
```

## علت مشکل
افزونه قبلی فقط فرمت‌های عددی ساده را تشخیص می‌داد:
- `2024-03-20` یا `2024/03/20`
- `20-03-2024` یا `20/03/2024`

اما فرمت‌های پیچیده‌تر مثل:
- `21/Apr/25` (با اختصار ماه)
- `2 days ago` (تاریخ نسبی)
را تشخیص نمی‌داد.

## تغییرات اعمال شده

### 1. بهبود تابع `containsDate`
الگوهای جدید اضافه شده:
```javascript
// Month abbreviations with year
/\b(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[-\/\s]\d{1,2}[-\/\s]\d{2,4}\b/i,
/\b\d{1,2}[-\/\s](Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[-\/\s]\d{2,4}\b/i,

// Full month names
/\b(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},?\s+\d{4}\b/i,

// Relative time expressions
/\b(today|yesterday|tomorrow)\b/i,
/\b\d+\s+(day|days|week|weeks|month|months|year|years)\s+ago\b/i,
/\b(a|an)\s+(day|week|month|year)\s+ago\b/i
```

### 2. بهبود تابع `convertDatesInText`
فرمت‌های جدید پشتیبانی شده:

**الف) تاریخ‌های با اختصار ماه:**
- `21/Apr/25` → تبدیل به `1404/01/31`
- `15-Jan-24` → تبدیل به `1402/10/25`
- `Mar/10/24` → تبدیل به `1403/12/20`

**ب) تاریخ‌های با نام کامل ماه:**
- `January 15, 2024` → تبدیل مناسب
- `15 March 2024` → تبدیل مناسب

**ج) تاریخ‌های نسبی:**
- `2 days ago` → محاسبه تاریخ شمسی
- `yesterday` → تاریخ دیروز شمسی
- `a week ago` → یک هفته قبل شمسی

**د) سال‌های دو رقمی:**
- `21/Apr/25` → سال 25 به 2025 تبدیل می‌شود
- قاعده: 00-30 = 20xx، 31-99 = 19xx

## فایل‌های اضافه شده

### 1. `date-format-test.html`
صفحه تست جامع برای بررسی تمام فرمت‌های پشتیبانی شده

### 2. `test-date-detection.js`
اسکریپت تست برای کنسول مرورگر

### 3. `TESTING.md`
راهنمای کامل تست و عیب‌یابی

### 4. `quick-test.bat`
اسکریپت ساده برای تست سریع

## نحوه تست

1. افزونه را در کروم نصب کنید
2. فایل `date-format-test.html` را باز کنید  
3. بررسی کنید که تاریخ‌های مشکل‌دار تبدیل شده‌اند

## نتیجه مورد انتظار

برای مثال‌های گزارش شده:
- `21/Apr/25 9:50 AM` → `1404/01/31 9:50 AM`
- `2 days ago 1:46 PM` → `1404/03/05 1:46 PM` (بسته به تاریخ جاری)

---

## لاگ‌های کنسول

افزونه اکنون لاگ‌های مفصل‌تری تولید می‌کند:
```
📅 Converting: 21/Apr/25 (2025/4/21)
✅ 21/Apr/25 → 1404/01/31
```

این تغییرات باید مشکل گزارش شده توسط کاربر را حل کند.
